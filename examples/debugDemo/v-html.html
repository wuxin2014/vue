<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
<script src="../../dist/vue.js"></script>
<div id="app">
  <div v-html="content"></div>
  <div v-html="contentATag"></div>
  <div v-html="contentImgTag"></div>
  <div v-html="contentScriptTag"></div>
</div>
<script>
  // html指令是不需要运行时函数的，而自定义指令是需要运行时函数来执行的
  new Vue({
    el: '#app',
    data() {
      // 引入xss包并挂载到vue原型上123
      return {
        content: "<div>只在可信内容上使用 v-html，永不用在用户提交的内容上。<b>我是加粗文字</b><div>",
        contentATag: `<a style="font-size: 18px; color: red; font-weight: bold" onclick='alert("链接xss攻击")'>链接</a>`,
        contentImgTag: `<img src="htpp:slslskkk" onerror='alert("图片xss攻击")' />图片`,
        contentScriptTag: "插入了一个脚本：<script>alert(1)<\/script>"
      }
    },
    mounted() {
      // 1. html5中为了安全起见，不会执行innerHTML中插入的<script>的代码, 如contentScriptTag
      // 2. 使用script标签插入的代码会执行
      // var script = document.createElement('script');
      // script.innerHTML = 'console.log(2)';
      // this.$el.parentElement.appendChild(script); //打印了 2
    }
  })

  /**
   * contentScriptTag
   * html5中为了安全起见，不会执行innerHTML中插入的<script>的代码
   * contentATag,contentImgTag都会执行标签上的事件,会有风险
   */ 
  // (function anonymous() {
  //   with(this){
  //     return _c('div',{attrs:{"id":"app"}},[
  //       _c('div',{domProps:{"innerHTML":_s(content)}}),
  //       _v(" "),
  //       _c('div',{domProps:{"innerHTML":_s(contentATag)}}),
  //       _v(" "),
  //       _c('div',{domProps:{"innerHTML":_s(contentImgTag)}}),
  //       _v(" "),
  //       _c('div',{domProps:{"innerHTML":_s(contentScriptTag)}})
  //     ])
  //   }
  // })
</script>
</body>

</html>
